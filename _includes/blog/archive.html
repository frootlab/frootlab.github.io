{% comment %}
================================================================================
Get Posts of given Type
================================================================================
{% endcomment %}

{% case include.type %}
  {% when 'blog' %}
    {% assign posts = site.posts %}
  {% when 'microblog' %}
    {% assign posts = site.news %}
  {% else %}
    {% assign posts = site.posts %}
{% endcase %}

{% comment %}
================================================================================
Group Posts by Year
================================================================================
{% endcomment %}

{% assign groups = posts | group_by_exp: "post", "post.date | date: '%Y'" %}
{% assign years = groups | map: "name" | sort | reverse %}

{% comment %}
================================================================================
Display Posts
================================================================================
{% endcomment %}

{% for year in years %}
<section class="dark-grey">
  <h3>{{ year }}</h3>
</section>
<section class="grey">
  {% include blog/preview.html year=year type=include.type display=include.display %}
</section>
{% endfor %}

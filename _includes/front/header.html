{% assign title = page.title | markdownify | remove: "<p>" | remove: "</p>" %}

{% if page.cloudinary %}
  {% if page.image-format == "svg" %}
    {% assign transform = "b_rgb:f5f5f5,bo_20px_solid_rgb:f5f5f5,c_pad,h_900,q_auto:best,w_700" %}
  {% elsif page.image-orientation == "portrait" %}
    {% assign transform = "c_scale,q_auto:good,w_960" %}
  {% elsif page.image-orientation == "landscape" %}
    {% assign transform = "c_crop,w_0.5,h_1.0/c_scale,q_auto:good,w_960" %}
  {% else %}
    {% assign transform = "c_scale,q_auto:good,w_960" %}
  {% endif %}
  {% assign image = "https://res.cloudinary.com/frootlab/image/upload/"
    | append: transform
    | append: "/"
    | append: page.cloudinary
    | append: ".webp" %}
{% elsif page.image %}
  {% if page.image contains 'http://' or page.image contains 'https://' %}
    {% assign image = page.image %}
  {% else %}
    {% assign image = site.url | append: "/" | append: page.image %}
  {% endif %}
{% else %}
  {% assign image = site.url | append: "/" | append: site.background.default %}
{% endif %}

{% if page.logo %}
  {% if page.logo contains 'http://' or page.logo contains 'https://' %}
    {% assign logo = page.logo %}
  {% else %}
    {% assign logo = site.url | append: page.logo %}
  {% endif %}
  {% if page.logo-alt %}
    {% assign logo-alt = page.logo-alt %}
  {% else %}
    {% assign logo-alt = title | append: " Logo" %}
  {% endif %}
{% endif %}

{% if page.title-layout %}
  {% assign title-class = page.title-layout %}
{% else %}
  {% assign title-class = "boxed" %}
{% endif %}


<div class="front" style="background-image:
  linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.0) 20%),
  url({{ image }});">
  <div class="content">
    <div class="title-page">
      {% if logo %}
      <div class="logo"><img src="{{ logo }}" alt="{{ logo-alt }}"></div>
      {% endif %}
      <h1><span class="title {{ title-class }}">{{ title }}</span></h1>
      {% if page.subtitle %}
      <h2><span class="subtitle {{ title-class }}">{{ page.subtitle }}</span></h2>
      {% endif %}
    </div>

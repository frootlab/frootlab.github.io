{% comment %}
================================================================================
Determine canonical url
================================================================================
{% endcomment %}

{% assign canonical = page.url
  | replace: 'index.html', ''
  | prepend: site.baseurl
  | prepend: site.url
  | replace: 'http:', 'https:' %}

{% comment %}
================================================================================
Get title
================================================================================
{% endcomment %}

{% if page.title %}
  {% assign title = page.title
    | strip_html
    | strip_newlines
    | escape_once %}
{% else %}
  {% assign title = site.title
    | append: " "
    | append: site.subtitle %}
{% endif %}

{% comment %}
================================================================================
Get description
================================================================================
{% endcomment %}

{% if page.excerpt %}
  {% assign description = page.excerpt
    | markdownify
    | strip_html %}
{% else %}
  {% assign description = site.description %}
{% endif %}

{% assign description = description
  | strip
  | strip_newlines
  | escape_once %}

{% comment %}
================================================================================
Get keywords by site.keywords, project titles, project aliases and page.tags
================================================================================
{% endcomment %}

{% assign keywords = site.keywords
  | replace: ', ',','
  | strip_newlines
  | strip %}

{% assign keywords = site.projects
  | sort: "popularity"
  | reverse
  | map: 'title'
  | join: ','
  | prepend: ','
  | prepend: keywords %}

{% assign keywords = site.projects
  | sort: "popularity"
  | reverse
  | map: 'alias'
  | compact
  | join: ','
  | prepend: ','
  | prepend: keywords %}

{% if page.tags %}
  {% assign tags = page.tags
    | join: ','
    | prepend: ','
    | prepend: keywords %}
{% endif %}

{% assign keywords = keywords
  | split: ","
  | uniq
  | join: "," %}

{% comment %}
================================================================================
Create HTML
================================================================================
{% endcomment %}

<meta charset="UTF-8">
<link rel="canonical" href="{{ canonical }}">
<title>{{ title }}</title>
<meta name="description" content="{{ description }}">
<meta name="keywords" content="{{ keywords }}">

<!-- Theme Color -->
<meta name="theme-color" content="#043846">
<meta name="msapplication-TileColor" content="#043846">
<meta name="msapplication-navbutton-color" content="#043846">
<meta name="apple-mobile-web-app-status-bar-style" content="#043846">

<!-- Icons (generated by RealFaviconGenerator.net) -->
<link rel="icon" href="/favicon.ico">
<link rel="icon" href="/images/favicon-32x32.png" type="image/png" sizes="32x32">
<link rel="icon" href="/images/favicon-16x16.png" type="image/png" sizes="16x16">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#043846">
<link rel="apple-touch-icon" href="/images/apple-touch-icon.png" sizes="180x180">

<!-- WebApp Settings -->
<link rel="manifest" href="/site.webmanifest">

<!-- Dublin Core -->
<meta name="DC.language" content="{{ site.language }}">
<meta name="DC.source" content="{{ site.url }}">
<meta name="DC.relation" content="{{ site.relation }}">
<meta name="DC.title" content="{{ title }}">
<meta name="DC.keywords" content="{{ keywords }}">
<meta name="DC.subject" content="{{ description }}">
<meta name="DC.description" content="{{ description }}">
<meta name="DCTERMS.rights" content="{{ site.copyright }}">

<!-- Open Graph -->
<meta property="og:locale" content="{{ site.locale }}">
<meta property="og:type" content="article">
<meta property="og:title" content="{{ title }}">
<meta property="og:description" content="{{ description }}">
<meta property="og:url" content="{{ canonical }}">
<meta property="og:site_name" content="{{ site.title }}">
<meta property="og:image" content="{{ site.url }}/images/{{ site.logo }}">

<!-- Geo -->
<meta name="geo.country" content="DE">

<!-- Mobile -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="480">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- Try to use Chrome -->
<meta http-equiv="X-UA-Compatible" content="chrome=1">

<!-- Atom 1.0 Feeds -->
<link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml">

<!-- Feed -->
{% feed_meta %}

<!-- CSS -->
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous"> -->
<!-- <script src="https://kit.fontawesome.com/0bd6953961.js"></script> -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700&display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather:400,400i,700&display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono&display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400&display=swap">
<link rel="stylesheet" href="/css/main.css">

<!-- JS -->
<script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google-analytics }}"></script>
<script src="/js/main.js"></script>

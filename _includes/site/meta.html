{% comment %}
================================================================================
Determine canonical url
================================================================================
{% endcomment %}

{% assign canonical = page.url
  | replace: 'index.html', ''
  | prepend: site.baseurl
  | prepend: site.url
  | replace: 'http:', 'https:' %}

{% comment %}
================================================================================
Get title
================================================================================
{% endcomment %}

{% if page.title %}
  {% assign title = page.title
    | strip_html
    | strip_newlines
    | escape_once %}
{% else %}
  {% assign title = site.title
    | append: " "
    | append: site.subtitle %}
{% endif %}

{% comment %}
================================================================================
Get description
================================================================================
{% endcomment %}

{% if page.excerpt %}
  {% assign description = page.excerpt
    | markdownify
    | strip_html %}
{% else %}
  {% assign description = site.description %}
{% endif %}

{% assign description = description
  | strip
  | strip_newlines
  | escape_once %}

{% comment %}
================================================================================
Get keywords by site.keywords, project titles, project aliases and page.tags
================================================================================
{% endcomment %}

{% assign keywords = site.keywords
  | replace: ', ',','
  | strip_newlines
  | strip %}

{% assign keywords = site.projects
  | sort: "popularity"
  | reverse
  | map: 'title'
  | join: ','
  | prepend: ','
  | prepend: keywords %}

{% assign keywords = site.projects
  | sort: "popularity"
  | reverse
  | map: 'alias'
  | compact
  | join: ','
  | prepend: ','
  | prepend: keywords %}

{% if page.tags %}
  {% assign tags = page.tags
    | join: ','
    | prepend: ','
    | prepend: keywords %}
{% endif %}

{% assign keywords = keywords
  | split: ","
  | uniq
  | join: "," %}

{% comment %}
================================================================================
Create HTML
================================================================================
{% endcomment %}

<title>{{ title }}</title>
<link rel="canonical" href="{{ canonical }}">
<meta charset="UTF-8">
<meta name="description" content="{{ description }}">
<meta name="keywords" content="{{ keywords }}">

<!-- Theme Color -->
<meta name="theme-color" content="#043846">
<meta name="msapplication-TileColor" content="#043846">
<meta name="msapplication-navbutton-color" content="#043846">
<meta name="apple-mobile-web-app-status-bar-style" content="#043846">

<!-- Icons (generated by RealFaviconGenerator.net) -->
<link rel="icon" href="/favicon.ico">
<link rel="icon" href="/images/favicon-32x32.png" type="image/png" sizes="32x32">
<link rel="icon" href="/images/favicon-16x16.png" type="image/png" sizes="16x16">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#043846">
<link rel="apple-touch-icon" href="/images/apple-touch-icon.png" sizes="180x180">

<!-- WebApp Settings -->
<link rel="manifest" href="/site.webmanifest">

<!-- Dublin Core -->
<meta name="dc.language" content="{{ site.language }}">
<meta name="dc.source" content="{{ site.url }}">
<meta name="dc.relation" content="{{ site.relation }}">
<meta name="dc.title" content="{{ title }}">
<meta name="dc.keywords" content="{{ keywords }}">
<meta name="dc.subject" content="{{ description }}">
<meta name="dc.description" content="{{ description }}">
<meta name="dcterms.rights" content="{{ site.copyright }}">

<!-- Open Graph -->
<meta property="og:locale" content="{{ site.locale }}">
<meta property="og:type" content="article">
<meta property="og:title" content="{{ title }}">
<meta property="og:description" content="{{ description }}">
<meta property="og:url" content="{{ canonical }}">
<meta property="og:site_name" content="{{ site.title }}">
<meta property="og:image" content="{{ site.url }}/images/{{ site.logo }}">

<!-- Geo -->
<meta name="geo.country" content="DE">

<!-- Mobile -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="480">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- Try to use Chrome on IE -->
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

<!-- Atom 1.0 Feed -->
<link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">

<!-- Feed -->
{% feed_meta %}
